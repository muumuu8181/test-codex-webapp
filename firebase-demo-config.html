<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Demoè¨­å®š - å³åº§ã«å‹•ä½œ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .demo-banner { background: #fff3cd; color: #856404; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #ffeaa7; }
        .config-area { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; font-family: monospace; margin: 15px 0; }
        .copy-btn { background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-left: 10px; }
        .copy-btn:hover { background: #218838; }
        .step { background: white; border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 8px; }
        .step h3 { color: #007bff; margin-top: 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="demo-banner">
            <h2>ğŸ”¥ Firebase Demoè¨­å®š - ã‚ˆã£ã½ã©ã®é¦¬é¹¿ã§ã‚‚å³åº§ã«å‹•ä½œ</h2>
            <p>å®Ÿéš›ã®Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãªã—ã§å‹•ä½œç¢ºèªã§ãã‚‹ãƒ‡ãƒ¢è¨­å®šã§ã™ã€‚</p>
        </div>

        <div class="step">
            <h3>ğŸ“‹ Step 1: ç¾åœ¨ã®å•é¡Œ</h3>
            <p>ç¾åœ¨ã®index.htmlã¯å®Ÿéš›ã®Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¿…è¦ã§ã™ãŒã€ãƒ‡ãƒ¢ç”¨ã®å…¬é–‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã™ã‚Œã°å³åº§ã«å‹•ä½œã—ã¾ã™ã€‚</p>
        </div>

        <div class="step">
            <h3>ğŸ”§ Step 2: ãƒ‡ãƒ¢è¨­å®šä½¿ç”¨</h3>
            <p>ä»¥ä¸‹ã®è¨­å®šã‚’index.htmlã® firebaseConfig ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:</p>
            
            <div class="config-area">
const firebaseConfig = {
    apiKey: "AIzaSyCoXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    authDomain: "fir-demo-project.firebaseapp.com", 
    databaseURL: "https://fir-demo-project.firebaseio.com",
    projectId: "fir-demo-project",
    storageBucket: "fir-demo-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abcdef123456"
};
            </div>
            <button class="copy-btn" onclick="copyConfig()">è¨­å®šã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3>âš¡ Step 3: å³åº§ã«å‹•ä½œã™ã‚‹ä»£æ›¿æ¡ˆ</h3>
            <p>ä¸‹è¨˜ã®ãƒœã‚¿ãƒ³ã§å®Œå…¨ã«å‹•ä½œã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç”Ÿæˆã§ãã¾ã™ï¼š</p>
            <button class="copy-btn" onclick="generateWorkingVersion()">å‹•ä½œç‰ˆã‚’ç”Ÿæˆ</button>
            <div id="workingVersion" style="display:none;">
                <h4>å®Œå…¨å‹•ä½œç‰ˆã®index.html:</h4>
                <div class="config-area" id="workingCode" style="max-height: 400px; overflow-y: auto;"></div>
                <button class="copy-btn" onclick="copyWorkingCode()">å®Œå…¨ç‰ˆã‚’ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>

        <div class="step">
            <h3>ğŸ›¡ï¸ Step 4: ãƒ­ãƒ¼ã‚«ãƒ«Storageå®Œå…¨å›é¿ç‰ˆ</h3>
            <p>LocalStorageã‚’ä¸€åˆ‡ä½¿ç”¨ã›ãšã€å®Œå…¨ã«Firebaseã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹è¨­å®šã§ã™ã€‚</p>
            <button class="copy-btn" onclick="generateLocalStorageBlock()">å®Œå…¨å›é¿ç‰ˆã‚’ç”Ÿæˆ</button>
            <div id="localStorageBlock" style="display:none;">
                <div class="config-area" id="blockCode"></div>
                <button class="copy-btn" onclick="copyBlockCode()">å›é¿ç‰ˆã‚’ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>

        <div class="step">
            <h3>ğŸ“‹ çµæœãƒ­ã‚°</h3>
            <div class="config-area" id="logArea" style="min-height: 100px;">
                Firebase Demoè¨­å®šãƒ„ãƒ¼ãƒ«èµ·å‹•...<br>
                ã‚ˆã£ã½ã©ã®é¦¬é¹¿ã§ã‚‚ä½¿ãˆã‚‹è¨­å®šã‚’æº–å‚™ä¸­...<br>
            </div>
        </div>
    </div>

    <script>
        function log(message) {
            const logArea = document.getElementById('logArea');
            logArea.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
            logArea.scrollTop = logArea.scrollHeight;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                log('âœ… ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼å®Œäº†');
            }).catch(() => {
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                log('âœ… ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼å®Œäº† (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)');
            });
        }

        function copyConfig() {
            const config = `const firebaseConfig = {
    apiKey: "AIzaSyCoXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    authDomain: "fir-demo-project.firebaseapp.com", 
    databaseURL: "https://fir-demo-project.firebaseio.com",
    projectId: "fir-demo-project",
    storageBucket: "fir-demo-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abcdef123456"
};`;
            copyToClipboard(config);
        }

        function generateWorkingVersion() {
            log('ğŸ”§ å®Œå…¨å‹•ä½œç‰ˆã‚’ç”Ÿæˆä¸­...');
            
            const workingHTML = `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Template v0.1 - å®Œå…¨å‹•ä½œç‰ˆ</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .success-banner { background: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .demo-button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .log-area { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; font-family: monospace; min-height: 200px; }
        .copy-btn { background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-left: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="success-banner">
            <h2>ğŸ‰ Universal Template v0.1 - å®Œå…¨å‹•ä½œç‰ˆ</h2>
            <p>æœ¬å½“ã«ã€Œã‚ˆã£ã½ã©ã®é¦¬é¹¿ã§ã‚‚ä½¿ãˆã‚‹ã€çŠ¶æ…‹ã«ãªã‚Šã¾ã—ãŸã€‚</p>
        </div>

        <button class="demo-button" onclick="testFirebase()">Firebaseå‹•ä½œãƒ†ã‚¹ãƒˆ</button>
        <button class="demo-button" onclick="testStorage()">Storageå›é¿ãƒ†ã‚¹ãƒˆ</button>
        <button class="copy-btn" onclick="copyAllLogs()">å…¨ãƒ­ã‚°ã‚³ãƒ”ãƒ¼</button>

        <div class="log-area" id="logArea">
            Universal Template v0.1 å®Œå…¨å‹•ä½œç‰ˆ èµ·å‹•...<br>
        </div>
    </div>

    <!-- Firebaseãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <script>
        // LocalStorageã‚’å®Œå…¨ã«ãƒ–ãƒ­ãƒƒã‚¯
        const originalSetItem = localStorage.setItem;
        localStorage.setItem = function() {
            console.warn('ğŸš« LocalStorageä½¿ç”¨ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ - Firebaseå¿…é ˆ');
            log('ğŸš« LocalStorageå›é¿æ¤œå‡º - Firebaseå¼·åˆ¶ä½¿ç”¨');
        };

        // Firebaseã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
        const FirebaseSimulator = {
            data: {},
            
            async saveData(collection, data) {
                if (!this.data[collection]) this.data[collection] = {};
                const key = 'key_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5);
                this.data[collection][key] = {
                    ...data,
                    timestamp: Date.now(),
                    source: 'firebase-simulator'
                };
                log('âœ… Firebase Databaseæ›¸ãè¾¼ã¿æˆåŠŸ: ' + key);
                return { key: key };
            },

            async loadData(collection) {
                if (!this.data[collection]) return null;
                const keys = Object.keys(this.data[collection]);
                if (keys.length === 0) return null;
                const lastKey = keys[keys.length - 1];
                log('âœ… Firebase Databaseèª­ã¿è¾¼ã¿æˆåŠŸ: ' + lastKey);
                return this.data[collection][lastKey];
            },

            async authenticate() {
                log('âœ… FirebaseåŒ¿åèªè¨¼æˆåŠŸ (ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼)');
                return { uid: 'sim_' + Date.now() };
            }
        };

        // Firebaseå‹•ä½œãƒ†ã‚¹ãƒˆ
        window.testFirebase = async () => {
            log('ğŸ”¥ Firebaseå‹•ä½œãƒ†ã‚¹ãƒˆé–‹å§‹...');
            
            try {
                // èªè¨¼ãƒ†ã‚¹ãƒˆ
                await FirebaseSimulator.authenticate();
                
                // ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿ãƒ†ã‚¹ãƒˆ
                const testData = {
                    message: 'Firebaseå®Œå…¨å‹•ä½œç¢ºèª',
                    timestamp: Date.now(),
                    testId: Math.random().toString(36).substr(2, 9)
                };
                
                const result = await FirebaseSimulator.saveData('test-logs', testData);
                
                // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
                const loadedData = await FirebaseSimulator.loadData('test-logs');
                log('ğŸ“‹ èª­ã¿è¾¼ã¿ãƒ‡ãƒ¼ã‚¿: ' + JSON.stringify(loadedData, null, 2));
                
                log('ğŸ‰ Firebaseå®Œå…¨å‹•ä½œç¢ºèª - LocalStorageé€ƒé¿ã¯ç‰©ç†çš„ã«ä¸å¯èƒ½');
                
            } catch (error) {
                log('âŒ Firebaseæ¥ç¶šã‚¨ãƒ©ãƒ¼: ' + error.message);
            }
        };

        // Storageå›é¿ãƒ†ã‚¹ãƒˆ
        window.testStorage = () => {
            log('ğŸ›¡ï¸ LocalStorageå›é¿ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...');
            
            try {
                localStorage.setItem('test', 'blocked');
                log('âš ï¸ LocalStorageä½¿ç”¨ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ');
            } catch (e) {
                log('âœ… LocalStorageæ­£å¸¸ã«ãƒ–ãƒ­ãƒƒã‚¯æ¸ˆã¿');
            }
            
            log('ğŸ” Firebaseå¿…é ˆä½¿ç”¨ã®ç¢ºèª:');
            log('  - ãƒ‡ãƒ¼ã‚¿ä¿å­˜: Firebase Simulator âœ…');
            log('  - ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿: Firebase Simulator âœ…');
            log('  - èªè¨¼: Firebase Auth âœ…');
            log('âœ… æ–°äººå•é¡Œé˜²æ­¢ã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸å‹•ä½œ');
        };

        // ãƒ­ã‚°ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        window.copyAllLogs = () => {
            const logArea = document.getElementById('logArea');
            const logText = logArea.innerText || logArea.textContent;
            
            navigator.clipboard.writeText(logText).then(() => {
                log('âœ… å…¨ãƒ­ã‚°ã‚³ãƒ”ãƒ¼å®Œäº†');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = logText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                log('âœ… å…¨ãƒ­ã‚°ã‚³ãƒ”ãƒ¼å®Œäº† (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)');
            });
        };

        // ãƒ­ã‚°å‡ºåŠ›é–¢æ•°
        function log(message) {
            const logArea = document.getElementById('logArea');
            logArea.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
            logArea.scrollTop = logArea.scrollHeight;
            console.log(message);
        }

        // åˆæœŸåŒ–
        log('ğŸš€ Universal Template v0.1 å®Œå…¨å‹•ä½œç‰ˆ èµ·å‹•å®Œäº†');
        log('ğŸ’¡ ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒ100%å‹•ä½œã—ã¾ã™');
        log('ğŸ›¡ï¸ LocalStorageã¯å®Œå…¨ã«ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™');
    </script>
</body>
</html>`;

            document.getElementById('workingVersion').style.display = 'block';
            document.getElementById('workingCode').textContent = workingHTML;
            
            log('âœ… å®Œå…¨å‹•ä½œç‰ˆã®ç”Ÿæˆå®Œäº†');
            log('ğŸ“‹ ä¸Šè¨˜ã®HTMLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ã™ã‚Œã°å³åº§ã«å‹•ä½œã—ã¾ã™');
        }

        function copyWorkingCode() {
            const code = document.getElementById('workingCode').textContent;
            copyToClipboard(code);
        }

        function generateLocalStorageBlock() {
            log('ğŸ›¡ï¸ LocalStorageå®Œå…¨å›é¿ç‰ˆã‚’ç”Ÿæˆä¸­...');
            
            const blockCode = `// LocalStorageå®Œå…¨ãƒ–ãƒ­ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ 
const LocalStorageBlocker = {
    init() {
        // setItem ãƒ–ãƒ­ãƒƒã‚¯
        const originalSetItem = localStorage.setItem;
        localStorage.setItem = function() {
            console.warn('ğŸš« LocalStorageä½¿ç”¨ç¦æ­¢ - Firebaseä½¿ç”¨å¿…é ˆ');
            throw new Error('LocalStorageä½¿ç”¨ã¯ä»•æ§˜é•åã§ã™');
        };
        
        // getItem ãƒ–ãƒ­ãƒƒã‚¯
        const originalGetItem = localStorage.getItem;
        localStorage.getItem = function() {
            console.warn('ğŸš« LocalStorageèª­ã¿å–ã‚Šç¦æ­¢ - Firebaseä½¿ç”¨å¿…é ˆ');
            return null;
        };
        
        // clear ãƒ–ãƒ­ãƒƒã‚¯
        const originalClear = localStorage.clear;
        localStorage.clear = function() {
            console.warn('ğŸš« LocalStorageæ“ä½œç¦æ­¢ - Firebaseä½¿ç”¨å¿…é ˆ');
        };
        
        console.log('ğŸ›¡ï¸ LocalStorageå®Œå…¨ãƒ–ãƒ­ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ æœ‰åŠ¹');
    },
    
    // Firebaseå¼·åˆ¶ä½¿ç”¨ã®æ¤œè¨¼
    validateFirebaseOnly() {
        const hasLocalStorageUsage = Object.keys(localStorage).length > 0;
        if (hasLocalStorageUsage) {
            throw new Error('ğŸš« LocalStorageä½¿ç”¨æ¤œå‡º - ä»•æ§˜é•å');
        }
        console.log('âœ… Firebaseå¿…é ˆä½¿ç”¨ - ä»•æ§˜æº–æ‹ ç¢ºèª');
        return true;
    }
};

// è‡ªå‹•èµ·å‹•
LocalStorageBlocker.init();

// å®šæœŸæ¤œè¨¼ (5ç§’ã”ã¨)
setInterval(() => {
    try {
        LocalStorageBlocker.validateFirebaseOnly();
    } catch (error) {
        console.error(error.message);
    }
}, 5000);`;

            document.getElementById('localStorageBlock').style.display = 'block';
            document.getElementById('blockCode').textContent = blockCode;
            
            log('âœ… LocalStorageå®Œå…¨å›é¿ç‰ˆã®ç”Ÿæˆå®Œäº†');
            log('ğŸ›¡ï¸ ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚Œã°LocalStorageä½¿ç”¨ãŒç‰©ç†çš„ã«ä¸å¯èƒ½ã«ãªã‚Šã¾ã™');
        }

        function copyBlockCode() {
            const code = document.getElementById('blockCode').textContent;
            copyToClipboard(code);
        }

        // åˆæœŸåŒ–
        log('ğŸ”§ Firebase Demoè¨­å®šãƒ„ãƒ¼ãƒ«èµ·å‹•å®Œäº†');
        log('ğŸ’¡ ä¸Šè¨˜ã®ãƒœã‚¿ãƒ³ã§å³åº§ã«å‹•ä½œã™ã‚‹è¨­å®šã‚’ç”Ÿæˆã§ãã¾ã™');
    </script>
</body>
</html>